[supervisord]
nodaemon=true
logfile=/app/logs/supervisord.log
logfile_maxbytes=50MB
logfile_backups=10
loglevel=info
pidfile=/tmp/supervisord.pid

[program:nginx]
command=nginx -g "daemon off;"
autostart=true
autorestart=true
startretries=3
stdout_logfile=/app/logs/nginx.log
stdout_logfile_maxbytes=10MB
stderr_logfile=/app/logs/nginx_error.log
stderr_logfile_maxbytes=10MB

[program:fastapi]
command=uvicorn app.main:create_app --host 0.0.0.0 --port 8090 --workers 4
directory=/app
autostart=true
autorestart=true
startretries=3
stdout_logfile=/app/logs/fastapi.log
stdout_logfile_maxbytes=10MB
stderr_logfile=/app/logs/fastapi_error.log
stderr_logfile_maxbytes=10MB
environment=PYTHONPATH="/app"

[program:file_watcher]
command=python3 -m app.core.file_watcher
directory=/app
autostart=true
autorestart=true
startretries=3
stdout_logfile=/app/logs/file_watcher.log
stdout_logfile_maxbytes=10MB
stderr_logfile=/app/logs/file_watcher_error.log
stderr_logfile_maxbytes=10MB
environment=PYTHONPATH="/app"

[program:plugin_manager]
command=python3 -m app.core.plugin_manager
directory=/app
autostart=true
autorestart=true
startretries=3
stdout_logfile=/app/logs/plugin_manager.log
stdout_logfile_maxbytes=10MB
stderr_logfile=/app/logs/plugin_manager_error.log
stderr_logfile_maxbytes=10MB
environment=PYTHONPATH="/app"